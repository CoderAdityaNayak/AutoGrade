<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribution of Marks Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .mark-input {
            width: 100%;
            height: 100%;
            padding: 8px;
            text-align: center;
            border: none;
            background: transparent;
            font-weight: 600;
            color: #1e40af;
        }
        .mark-input:focus {
            outline: 2px solid #3b82f6;
            background: #eff6ff;
            border-radius: 4px;
        }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #d1d5db;
            text-align: center;
        }
        th {
            background-color: #f9fafb;
            padding: 12px 8px;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #374151;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen py-8 px-4 font-sans">

    <div class="max-w-4xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden border border-gray-200">
        <!-- Header -->
        <div class="bg-gray-50 border-b border-gray-200 py-6 px-8 text-center">
            <h1 class="text-2xl font-black text-gray-800 tracking-tight uppercase">Distribution of Marks</h1>
            <p class="text-gray-500 text-sm mt-1">Academic Internal Assessment Tracking</p>
        </div>

        <!-- Table Content -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th rowspan="2" class="w-24">Q. No.</th>
                        <th colspan="1">First I.A. Test</th>
                        <th colspan="1">Second I.A. Test</th>
                        <th colspan="1">Third I.A. Test</th>
                    </tr>
                    <tr class="bg-gray-50">
                        <th class="text-xs py-2">Marks</th>
                        <th class="text-xs py-2">Marks</th>
                        <th class="text-xs py-2">Marks</th>
                    </tr>
                </thead>
                <tbody id="marks-body">
                    <!-- Rows generated by JS -->
                </tbody>
                <tfoot>
                    <tr class="bg-blue-50 font-bold">
                        <td class="py-4 text-gray-700 uppercase text-sm">Total Marks</td>
                        <td id="total-ia1" class="text-xl text-blue-700">0</td>
                        <td id="total-ia2" class="text-xl text-blue-700">0</td>
                        <td id="total-ia3" class="text-xl text-blue-700">0</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Actions -->
        <div class="p-6 bg-gray-50 flex justify-between items-center border-t border-gray-200">
            <div class="text-sm text-gray-500 italic">
                * Press Tab to move down. Totals calculate automatically.
            </div>
            <div class="flex gap-3">
                <button onclick="clearAll()" class="px-5 py-2 text-sm font-semibold text-gray-600 hover:text-red-600 transition-colors">Clear All</button>
                <button onclick="saveData()" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-bold shadow-lg hover:bg-blue-700 active:scale-95 transition-all">Save Portal Data</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-8 py-3 rounded-full opacity-0 pointer-events-none transition-all duration-300 shadow-2xl z-50">
        Data saved successfully!
    </div>

    <script>
        const questions = [
            '1. a', '1. b', '1. c',
            '2. a', '2. b', '2. c',
            '3. a', '3. b', '3. c',
            '4. a', '4. b', '4. c'
        ];

        const marksData = {
            ia1: {},
            ia2: {},
            ia3: {}
        };

        function init() {
            const tbody = document.getElementById('marks-body');
            let rowsHtml = '';
            const totalQuestions = questions.length;

            questions.forEach((q, rowIndex) => {
                const qId = q.replace(/\s/g, '').replace('.', '');
                
                // Calculate tabindices so they flow vertically
                // IA1 (Col 0): 1 to 12
                // IA2 (Col 1): 13 to 24
                // IA3 (Col 2): 25 to 36
                const tabIndexIA1 = rowIndex + 1;
                const tabIndexIA2 = totalQuestions + rowIndex + 1;
                const tabIndexIA3 = (totalQuestions * 2) + rowIndex + 1;

                rowsHtml += `
                    <tr class="${rowIndex % 3 === 2 ? 'border-b-2 border-gray-300' : ''}">
                        <td class="bg-gray-50 font-medium text-gray-600 text-sm">${q}</td>
                        <td class="p-0">
                            <input type="number" 
                                tabindex="${tabIndexIA1}"
                                class="mark-input" 
                                oninput="updateTotal('ia1', '${qId}', this.value)" 
                                placeholder="-">
                        </td>
                        <td class="p-0">
                            <input type="number" 
                                tabindex="${tabIndexIA2}"
                                class="mark-input" 
                                oninput="updateTotal('ia2', '${qId}', this.value)" 
                                placeholder="-">
                        </td>
                        <td class="p-0">
                            <input type="number" 
                                tabindex="${tabIndexIA3}"
                                class="mark-input" 
                                oninput="updateTotal('ia3', '${qId}', this.value)" 
                                placeholder="-">
                        </td>
                    </tr>
                `;
            });

            tbody.innerHTML = rowsHtml;
        }

        function updateTotal(ia, qId, value) {
            marksData[ia][qId] = parseFloat(value) || 0;
            
            const total = Object.values(marksData[ia]).reduce((sum, val) => sum + val, 0);
            document.getElementById(`total-${ia}`).innerText = total;
            
            const el = document.getElementById(`total-${ia}`);
            if (total > 0) {
                el.classList.add('text-blue-800');
            } else {
                el.classList.remove('text-blue-800');
            }
        }

        function clearAll() {
            const inputs = document.querySelectorAll('.mark-input');
            inputs.forEach(input => input.value = '');
            
            ['ia1', 'ia2', 'ia3'].forEach(ia => {
                marksData[ia] = {};
                document.getElementById(`total-${ia}`).innerText = '0';
            });
        }

        function saveData() {
            console.log("Saving results:", marksData);
            const toast = document.getElementById('toast');
            toast.classList.remove('opacity-0');
            toast.classList.add('translate-y-[-10px]');
            
            setTimeout(() => {
                toast.classList.add('opacity-0');
                toast.classList.remove('translate-y-[-10px]');
            }, 3000);
        }

        window.onload = init;
    </script>
</body>
</html>